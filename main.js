(()=>{"use strict";var e="",t=[{name:"Столовая Гора",link:e+"0b1c44f7aa1eff47da8a.jpg"},{name:"Мыс Доброй Надежды",link:e+"620a635e8bb1cde0ac55.jpg"},{name:"Пляж Пингвинов",link:e+"d71745b925f559655dae.jpg"},{name:"Лаки Потолс",link:e+"32e0191547efa06b60c8.jpg"},{name:"Парк Тситсикама",link:e+"0b08ba409dbf05908e4f.jpg"},{name:"Водопад Лиссабон",link:e+"4963f4a0dc4ac6a5e035.jpg"}],n={popupForm:".popup__form",popupInput:".popup__input-field",popupInputError:"popup__input-field_error",popupInputMessageVisible:"popup__input-message_visible",popupSaveButton:".popup__save-button",popupSaveButtonActive:"popup__save-button_active",popupSaveButtonDisabled:"popup__save-button_disabled"},o=document.querySelectorAll(".popup"),u=document.querySelector(".popup_profile-edit"),r=document.forms.editProfile,a=document.forms.editAvatar,p=document.querySelector(".profile__edit-button"),c=document.querySelector(".profile__add-button"),i=(document.querySelector(".popup__save-button"),document.querySelector(".popup_card-add")),l=document.forms.addCard,s=document.querySelector(".element__list"),d=document.querySelector(".popup_card"),m=d.querySelector(".popup__image"),_=d.querySelector(".figure__image-caption"),v=r.elements.name,f=r.elements.occupation,S=a.elements.name,b=document.querySelector(".profile__name"),y=document.querySelector(".profile__description"),q=l.elements.name,L=l.elements.link,g=document.querySelector(".profile__image"),k=document.querySelector(".popup__avatar"),E=function(e,t,n,o){var u=e.querySelector(".popup__input-".concat(t.name));t.classList.add(o.popupInputError),u.textContent=n,u.classList.add(o.popupInputMessageVisible)},C=function(e,t,n){!function(e,t){return e.some((function(e){return 0===e.value.length||e.classList.contains(t.popupInputError)}))}(e,n)?(t.classList.add(n.popupSaveButtonActive),t.classList.remove(n.popupSaveButtonDisabled),t.removeAttribute("disabled")):(t.classList.remove(n.popupSaveButtonActive),t.classList.add(n.popupSaveButtonDisabled),t.setAttribute("disabled",!0))},x=function(e){Array.from(document.querySelectorAll(e.popupForm)).forEach((function(t){!function(e,t){var n=Array.from(e.querySelectorAll(t.popupInput)),o=e.querySelector(t.popupSaveButton);C(n,o,t),e.addEventListener("reset",(function(){setTimeout((function(){C(n,o,t)}),0)})),n.forEach((function(u){u.addEventListener("input",(function(){!function(e,t,n){t.validity.patternMismatch?E(e,t,t.dataset.errorMessage,n):t.validity.valid?function(e,t,n){var o=e.querySelector(".popup__input-".concat(t.name));t.classList.remove(n.popupInputError),o.classList.remove(n.popupInputMessageVisible)}(e,t,n):E(e,t,t.validationMessage,n)}(e,u,t),C(n,o,t)}))}))}(t,e)}))};function A(e,t){e.textContent=t}function I(e){m.src=e.src,m.alt=e.alt,_.textContent=e.alt,B(d)}function B(e){e.classList.add("popup_opened"),document.addEventListener("keydown",j)}function h(e){e.classList.remove("popup_opened"),document.removeEventListener("keydown",j)}function j(e){if("Escape"===e.key){var t=document.querySelector(".popup_opened");t&&h(t)}}function M(e,t,n){var o=document.querySelector("#element_add").content.querySelector(".element").cloneNode(!0),u=o.querySelector(".element__title"),r=o.querySelector(".element__image"),a=o.querySelector(".element__like-count"),p=o.querySelector(".element__like-button");return o.querySelector(".element__delete-button").addEventListener("click",(function(e){e.target.closest(".element").remove()})),p.addEventListener("click",(function(e){p.classList.contains("element__like-button_active")?(p.classList.remove("element__like-button_active"),a.textContent=Number(a.textContent)-1):(p.classList.add("element__like-button_active"),a.textContent=Number(a.textContent)+1)})),u.textContent=e,r.src=t,r.alt=e,r.addEventListener("click",(function(e){return I(e.target)})),a.textContent=n,o}g.addEventListener("click",(function(e){B(k)})),p.addEventListener("click",(function(){v.value=b.textContent,f.value=y.textContent,B(u)})),o.forEach((function(e){e.addEventListener("click",(function(t){t.target.classList.contains("popup__close-button")&&h(e),t.target.classList.contains("popup")&&h(e)}))})),c.addEventListener("click",(function(){return B(i)})),document.addEventListener("submit",(function(e){e.preventDefault();var t=e.target.querySelector(n.popupSaveButton);if(t)return function(e){e.textContent="Сохранение..."}(t),e.target.closest(".popup_card-add")?function(e){var t=M(q.value,L.value,0);s.prepend(t),A(e,"Создать"),h(i),l.reset()}(t):e.target.closest(".popup__avatar")?function(e){A(e,"Сохранить"),avatarEdit.style.backgroundImage="url(".concat(S.value),h(k),avatarForm.reset()}(t):function(e){A(e,"Сохранить"),b.textContent=v.value,y.textContent=f.value,h(u),x()}(t)})),t.forEach((function(e){var t=M(e.name,e.link,0);s.append(t)})),x(n)})();